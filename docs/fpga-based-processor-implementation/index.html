<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>FPGA Based Processor Implementation</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="preload" href="../assets/css/app.css%3Fv=7298761255.css" as="style" />
    <link rel="preload" href="../assets/js/manifest.js%3Fv=7298761255" as="script" />
    <link rel="preload" href="../assets/js/vendor/content-api.min.js%3Fv=7298761255" as="script" />
    <link rel="preload" href="../assets/js/vendor.js%3Fv=7298761255" as="script" />
    <link rel="preload" href="../assets/js/app.js%3Fv=7298761255" as="script" />
    <link rel="preconnect" href="https://polyfill.io">
    <link rel="dns-prefetch" href="https://polyfill.io">

      <link rel="preload" href="../assets/css/post.css%3Fv=7298761255.css" as="style" />
  <link rel="preload" href="../assets/js/post.js%3Fv=7298761255" as="script" />


    <style>
      /* These font-faces are here to make fonts work if the Ghost instance is installed in a subdirectory */

      /* source-sans-pro-regular */
      @font-face {
        font-family: 'Source Sans Pro';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: local('SourceSansPro-Regular'),
            url("../assets/fonts/source-sans-pro/latin/source-sans-pro-regular.woff2%3Fv=7298761255") format('woff2'),
            url("../assets/fonts/source-sans-pro/latin/source-sans-pro-regular.woff%3Fv=7298761255") format('woff');
      }

      /* source-sans-pro-600 */
      @font-face {
        font-family: 'Source Sans Pro';
        font-style: normal;
        font-weight: 600;
        font-display: swap;
        src: local('SourceSansPro-SemiBold'),
            url("../assets/fonts/source-sans-pro/latin/source-sans-pro-600.woff2%3Fv=7298761255") format('woff2'),
            url("../assets/fonts/source-sans-pro/latin/source-sans-pro-600.woff%3Fv=7298761255") format('woff');
      }

      /* source-sans-pro-700 */
      @font-face {
        font-family: 'Source Sans Pro';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: local('SourceSansPro-Bold'),
            url("../assets/fonts/source-sans-pro/latin/source-sans-pro-700.woff2%3Fv=7298761255") format('woff2'),
            url("../assets/fonts/source-sans-pro/latin/source-sans-pro-700.woff%3Fv=7298761255") format('woff');
      }

      /* iconmoon */
      @font-face {
        font-family: 'icomoon';
        font-weight: normal;
        font-style: normal;
        font-display: swap;
        src: url("../assets/fonts/icomoon/icomoon.eot%3F101fc3%3Fv=7298761255");
        src: url("../assets/fonts/icomoon/icomoon.eot%3F101fc3") format('embedded-opentype'),
        url("../assets/fonts/icomoon/icomoon.ttf%3F101fc3%3Fv=7298761255") format('truetype'),
        url("../assets/fonts/icomoon/icomoon.woff%3F101fc3%3Fv=7298761255") format('woff'),
        url("../assets/fonts/icomoon/icomoon.svg%3F101fc3") format('svg');
      }
    </style>

    <link rel="stylesheet" type="text/css" href="../assets/css/app.css%3Fv=7298761255.css" media="screen" />

      <link rel="stylesheet" type="text/css" href="../assets/css/post.css%3Fv=7298761255.css" media="screen" />


    

    <link rel="canonical" href="index.html" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="amp/index.html" />
    
    <meta property="og:site_name" content="The Seeker" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="FPGA Based Processor Implementation" />
    <meta property="og:description" content="In this post, I am going to talk about one of my main and very interesting project done in the university. As the title suggests, it is FPGA based processor implementation done to downsample an image. So let&#x27;s dive in. IntroductionThe goal of this project is to design a microprocessor" />
    <meta property="og:url" content="http://localhost:2368/fpga-based-processor-implementation/" />
    <meta property="og:image" content="http://localhost:2368/content/images/2021/12/photo-1597862624292-45748390b00e.jpg" />
    <meta property="article:published_time" content="2021-12-11T18:46:12.000Z" />
    <meta property="article:modified_time" content="2021-12-12T18:57:01.000Z" />
    <meta property="article:tag" content="Projects" />
    
    <meta property="article:publisher" content="https://www.facebook.com/ghost" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="FPGA Based Processor Implementation" />
    <meta name="twitter:description" content="In this post, I am going to talk about one of my main and very interesting project done in the university. As the title suggests, it is FPGA based processor implementation done to downsample an image. So let&#x27;s dive in. IntroductionThe goal of this project is to design a microprocessor" />
    <meta name="twitter:url" content="http://localhost:2368/fpga-based-processor-implementation/" />
    <meta name="twitter:image" content="http://localhost:2368/content/images/2021/12/photo-1597862624292-45748390b00e.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Sakuna Jayasundara" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Projects" />
    <meta name="twitter:site" content="@ghost" />
    <meta property="og:image:width" content="1000" />
    <meta property="og:image:height" content="667" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "The Seeker",
        "url": "http://localhost:2368/",
        "logo": {
            "@type": "ImageObject",
            "url": "http://localhost:2368/content/images/2021/12/image--1-.png"
        }
    },
    "author": {
        "@type": "Person",
        "name": "Sakuna Jayasundara",
        "image": {
            "@type": "ImageObject",
            "url": "http://localhost:2368/content/images/2021/12/IMG_20200411_014007_641.jpg",
            "width": 596,
            "height": 596
        },
        "url": "http://localhost:2368/author/sakuna/",
        "sameAs": []
    },
    "headline": "FPGA Based Processor Implementation",
    "url": "http://localhost:2368/fpga-based-processor-implementation/",
    "datePublished": "2021-12-11T18:46:12.000Z",
    "dateModified": "2021-12-12T18:57:01.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "http://localhost:2368/content/images/2021/12/photo-1597862624292-45748390b00e.jpg",
        "width": 1000,
        "height": 667
    },
    "keywords": "Projects",
    "description": "In this post, I am going to talk about one of my main and very interesting\nproject done in the university. As the title suggests, it is FPGA based\nprocessor implementation done to downsample an image. So let&#x27;s dive in.\n\nIntroduction\nThe goal of this project is to design a microprocessor for a specified task and\nthe Central Processing Unit (CPU) structure, while simulating it using a\nHardware Description Language (HDL) such as Verilog and to implement the given\ntask using a programmable logic dev",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:2368/"
    }
}
    </script>

    <meta name="generator" content="Ghost 4.25" />
    <link rel="alternate" type="application/rss+xml" title="The Seeker" href="../rss/index.html" />
    
    <script async src="../public/cards.min.js%3Fv=7298761255"></script><style>:root {--ghost-accent-color: #000000;}</style>
    <link rel="stylesheet" type="text/css" href="../public/cards.min.css%3Fv=7298761255.css">

    <script>
      // @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&dn=expat.txt Expat
      const ghostHost = "http://localhost:2368"
      // @license-end
    </script>
  </head>
  <body class="post-template tag-projects">
    



  
<header class="m-header with-picture js-header">
  <div class="m-mobile-topbar" data-aos="fade-down">
    <button class="m-icon-button in-mobile-topbar js-open-menu" aria-label="Open menu">
      <span class="icon-menu" aria-hidden="true"></span>
    </button>
      <a href="../index.html" class="m-logo in-mobile-topbar">
        <img src="../content/images/2021/12/image--1-.png" alt="The Seeker">
      </a>
    <button class="m-icon-button in-mobile-topbar js-open-search" aria-label="Open search">
      <span class="icon-search" aria-hidden="true"></span>
    </button>
    
  </div>

  <div class="m-menu js-menu">
    <button class="m-icon-button outlined as-close-menu js-close-menu" aria-label="Close menu">
      <span class="icon-close"></span>
    </button>
    <div class="m-menu__main" data-aos="fade-down">
      <div class="l-wrapper">
        <div class="m-nav js-main-nav">
          <nav class="m-nav__left js-main-nav-left" role="navigation" aria-label="Main menu">
            <ul>
                <li class="only-desktop">
                  <a href="../index.html" class="m-logo">
                    <img src="../content/images/2021/12/image--1-.png" alt="The Seeker">
                  </a>
                </li>
                
    <li class="nav-home">
      <a href="../index.html">Home</a>
    </li>
    <li class="nav-research">
      <a href="../tag/research/index.html">Research</a>
    </li>
    <li class="nav-projects">
      <a href="../tag/projects/index.html">Projects</a>
    </li>
    <li class="nav-articles">
      <a href="../tag/articles/index.html">Articles</a>
    </li>
    <li class="nav-author">
      <a href="../author/sakuna/index.html">Author</a>
    </li>
    <li class="nav-cv">
      <a href="../sakuna-jayasundara/index.html">CV</a>
    </li>

              <li class="submenu-option js-submenu-option">
                <button class="m-icon-button in-menu-main more js-toggle-submenu" aria-label="Open submenu">
                  <span class="icon-more" aria-hidden="true"></span>
                </button>
                <div class="m-submenu js-submenu">
                  <div class="l-wrapper in-submenu">
                    <section class="m-recent-articles">
                      <h3 class="m-submenu-title in-recent-articles">Recent articles</h3>
                          <div class="glide js-recent-slider">
                            <div class="glide__track" data-glide-el="track">
                              <div class="glide__slides">
                                <div class="glide__slide">
                                  <a href="../ble-based-indoor-positioning-system/index.html" class="m-recent-article">
                                    <div class="m-recent-article__picture ">
                                        <img src="../content/images/size/w300/2021/12/Bluetooth-Logo-pb87i7n3872aiq9im36yfrdezg42xgkqx9skbf64qw.png" loading="lazy" alt="">
                                    </div>
                                    <h3 class="m-recent-article__title js-recent-article-title" title="BLE Based Indoor Positioning System">
                                      BLE Based Indoor Positioning System
                                    </h3>
                                    <span class="m-recent-article__date">25 minutes ago</span>
                                  </a>
                                </div>
                                <div class="glide__slide">
                                  <a href="../object-detection-tracking-and-suspicious-activity-recognition-formaritime-surveillance-using-thermal-vision/index.html" class="m-recent-article">
                                    <div class="m-recent-article__picture ">
                                        <img src="../content/images/size/w300/2021/12/PTI02_10_2021_000230B_1613623895951_1613623935527_1638100241965.jpg" loading="lazy" alt="">
                                    </div>
                                    <h3 class="m-recent-article__title js-recent-article-title" title="Object Detection, Tracking and Suspicious Activity Recognition for
Maritime Surveillance using Thermal Vision">
                                      Object Detection, Tracking and Suspicious Activity Recognition for
Maritime Surveillance using Thermal Vision
                                    </h3>
                                    <span class="m-recent-article__date">12 hours ago</span>
                                  </a>
                                </div>
                                <div class="glide__slide">
                                  <a href="index.html" class="m-recent-article">
                                    <div class="m-recent-article__picture ">
                                        <img src="../content/images/size/w300/2021/12/photo-1597862624292-45748390b00e.jpg" loading="lazy" alt="">
                                    </div>
                                    <h3 class="m-recent-article__title js-recent-article-title" title="FPGA Based Processor Implementation">
                                      FPGA Based Processor Implementation
                                    </h3>
                                    <span class="m-recent-article__date">a day ago</span>
                                  </a>
                                </div>
                                <div class="glide__slide">
                                  <a href="../korsal/index.html" class="m-recent-article">
                                    <div class="m-recent-article__picture ">
                                        <img src="../content/images/size/w300/2021/12/android-user-activity-recognition-still-walking-running-driving.jpg" loading="lazy" alt="">
                                    </div>
                                    <h3 class="m-recent-article__title js-recent-article-title" title="KORSAL: Key-point Detection based Online Real-Time Spatio-Temporal Action Localization">
                                      KORSAL: Key-point Detection based Online Real-Time Spatio-Temporal Action Localization
                                    </h3>
                                    <span class="m-recent-article__date">a day ago</span>
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>
                    </section>
                    <section class="m-tags">
                      <h3 class="m-submenu-title">Tags</h3>
                        <ul>
                            <li>
                              <a href="../tag/articles/index.html">Articles</a>
                            </li>
                            <li>
                              <a href="../tag/projects/index.html">Projects</a>
                            </li>
                            <li>
                              <a href="../tag/research/index.html">Research</a>
                            </li>
                        </ul>
                    </section>
                  </div>
                </div>
              </li>
            </ul>
          </nav>
          <div class="m-nav__right">
            <button class="m-icon-button in-menu-main js-open-search" aria-label="Open search">
              <span class="icon-search" aria-hidden="true"></span>
            </button>
            <div class="m-toggle-darkmode js-tooltip" data-tippy-content="Toggle dark mode" tabindex="0">
              <label for="toggle-darkmode" class="sr-only">
                Toggle dark mode
              </label>
              <input id="toggle-darkmode" type="checkbox" class="js-toggle-darkmode">
              <div>
                <span class="icon-moon moon" aria-hidden="true"></span>
                <span class="icon-sunny sun" aria-hidden="true"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</header>

<main class="main-wrap">
    
  <section class="m-hero with-picture" data-aos="fade">
    <div class="m-hero__picture in-post">
      <img
        srcset="../content/images/size/w300/2021/12/photo-1597862624292-45748390b00e.jpg390b00e.jpg 300w../content/images/size/w600/2021/12/photo-1597862624292-45748390b00e.jpg8390b00e.jpg 600../content/images/size/w1000/2021/12/photo-1597862624292-45748390b00e.jpg48390b00e.jpg 100../content/images/size/w2000/2021/12/photo-1597862624292-45748390b00e.jpg748390b00e.jpg 2000w
        "
        sizes="(max-width: 600px) 600px, (max-width: 1000px) 1000px, 2000px"
        src="../content/images/size/w1000/2021/12/photo-1597862624292-45748390b00e.jpg"
        alt=""
      />
    </div>
    </section>
  
  <article>
    <div class="l-content in-post">
        <div class="l-wrapper in-post  js-aos-wrapper" data-aos="fade-up"
          data-aos-delay="300">
          <div
            class="l-post-content js-progress-content">
            <header class="m-heading">
              <h1 class="m-heading__title in-post">FPGA Based Processor Implementation</h1>
              <div class="m-heading__meta">
                  <a href="../tag/projects/index.html" class="m-heading__meta__tag">Projects</a>
                  <span class="m-heading__meta__divider" aria-hidden="true">&bull;</span>
                <span class="m-heading__meta__time">Dec 11, 2021</span>
              </div>
            </header>
            <div class="pos-relative js-post-content">
              <div class="m-share">
                <div class="m-share__content js-sticky">

                  <a href="https://github.com/sakunaharinda"
                    class="m-icon-button filled in-share" target="_blank" rel="noopener" aria-label="Facebook">
                    <span class="icon-github" aria-hidden="true"></span>
                  </a>
                  <a href="https://scholar.google.com/citations?user=_2tM_-UAAAAJ&hl=en"
                    class="m-icon-button filled in-share" target="_blank" rel="noopener" aria-label="Twitter">
                    <span class="icon-globe" aria-hidden="true"></span>
                  </a>
                  <a href="https://www.linkedin.com/in/sakuna-harinda/"
                    class="m-icon-button filled in-share" target="_blank" rel="noopener" aria-label="Twitter">
                    <span class="icon-linkedin" aria-hidden="true"></span>
                  </a>
                  <button class="m-icon-button filled in-share progress js-scrolltop" aria-label="Scroll to top">
                    <span class="icon-arrow-top" aria-hidden="true"></span>
                    <svg aria-hidden="true">
                      <circle class="progress-ring__circle js-progress" fill="transparent" r="0" />
                    </svg>
                  </button>
                </div>
              </div>
              <p>In this post, I am going to talk about one of my main and very interesting project done in the university. As the title suggests, it is FPGA based processor implementation done to downsample an image. So let's dive in.</p><h2 id="introduction">Introduction</h2><p>The goal of this project is to design a microprocessor for a specified task and the Central Processing Unit (CPU) structure, while simulating it using a Hardware Description Language (HDL) such as Verilog and to implement the given task using a programmable logic device, preferably a Field Programmable Gate Arrays (FPGA). This report contains documents regarding the structure of the microprocessor and CPU design, the Verilog codes used to configure it and finally the physical configuration of the hardware.</p><ul><li><strong>Central Processing Unit</strong><br>Central Processing Unit (CPU) widely considered as the brain of any computer device, is the place where all the instructions are carried out by performing logical operations, arithmetic operations, control operations and input/output operations. Hence, as explained above, CPU contains of two main components, the processor and the control unit while having a memory component and I/O components connecting to the CPU separately.</li><li><strong>Microprocessor </strong><br>Microprocessor can be considered as the most important part when it comes to a CPU. It is responsible for processing a unique set of instructions and processes. Its design is responsible to carry out logical and arithmetic operations. Microprocessors consists of many integrated circuits which holds thousands of components such as transistors etc.<br><br>Microprocessors are very important figures when it comes to modern computer designs and applications. With the high usage of microprocessors in the current market, various types of task- oriented microprocessors are available today. In this project we plan to design and implement a specific task-oriented microprocessor with maximum optimization.<br></li></ul><p>Project contains 3 main parts. </p><ul><li><strong>Sending the serial encoded pixel values to the FPGA and storing process</strong><br>Image is transmitted to the FPGA using UART (Universal Asynchronous Receiver/Transmitter) with 50MHz clock frequency. Image is sent by byte by byte serially using 4 states. They are START, IDLE, DATA, STOP. We built a python kernel using several libraries such as pyserial to communicate with RS232 port of the FPGA via the serial cable. After the image is sent to the FPGA we are notified by a LED. Then the process is triggered by a flag which is sent from the data memory module we built.<br><br>Since there were some errors when it comes to saving bits and storing them, we chose not to use the UART module and use the in-memory module for the data transfer process.<br><br>After the process is finished state of the processor is changed to the transmit state from process state. Then the UART transmitter is activated and it sends the processed down sampled image back to the computer for comparing and displaying purposes.<br><br>We can use any size of image in the architecture we’re proposing, and pixel values will then be saved into the primary memory in the processor architecture. For the calculations and processing tasks in the latter sections, the values saved in these memory locations will be used.</li><li><strong>Down-sampling process</strong><br>With the values stored in the primary memory of the CPU, we begin our processing part by filtering the image using a gaussian kernel. The filtered image values will be saved in the remaining memory slots of the main memory of the CPU. Then we begin our down-sampling process and according to the instructions that have been pre-defined by us, the processor will carry them out and finally save the down-sampled image in the main memory, overlapping the original image at the first place. The down-sampling process will be given in order to the microprocessor by us according to an Instruction Set Architecture (ISA) that is being developed uniquely to our microprocessor. Each instruction in the ISA will contain few micro instructions and they will be fetched accordingly form the Instruction Register according to the algorithm we’ve developed. The ISA and each registers task will be discussed later in this report.</li><li><strong>Transmitting the result back to the user</strong><br>The down sampled image will be sent back to the user in a similar manner used in transmitting the image. </li></ul><h2 id="instruction-set-architecture">Instruction Set Architecture </h2><p>As explained above, the main task of this processor is to down-sample any given image by a factor of two. In this section, we’ll look at the architecture we have implemented to acquire this task and the use of all the special case and general case registers.</p><ul><li><strong>PC - </strong>A 10-bit Program Counter which keeps the main memory address of the next instruction to be fetched.</li><li><strong>IR - </strong>A 32-bit Instruction Register which holds the Instructions fetched.</li><li><strong>MAR - </strong>A 32-bit register</li><li><strong>AC - </strong>A 32-bit Accumulator which saves the intermediate values after a   computation and the pixels values to be written/ read from data memory</li><li><strong>SOR - </strong>A 32-bit register which points the source location of the pixel</li><li><strong>DSTR - </strong>A 32-bit register which points the destination location of the pixel.</li><li><strong>COUN - </strong>A 32-bit register which is used for incrementing purposes.</li><li><strong>R1 - </strong>A 32-bit register used for general purpose and to store constant data </li><li><strong>R2 - </strong>A 32-bit register used for general purpose and to store constant data</li><li><strong>R3 - </strong>A 32-bit register used for general purpose and to store constant data</li></ul><h3 id="datapath">Datapath<br></h3><figure class="kg-card kg-image-card kg-card-hascaption"><img src="../content/images/2021/12/Screenshot-2021-12-12-at-00.22.07.png" class="kg-image" alt loading="lazy" width="902" height="1112" srcset="../content/images/size/w600/2021/12/Screenshot-2021-12-12-at-00.22.07.png 600w, ../content/images/2021/12/Screenshot-2021-12-12-at-00.22.07.png 902w" sizes="(min-width: 720px) 720px"><figcaption>Datapath of the Processor</figcaption></figure><h3 id="process-cycle">Process Cycle</h3><p>The processing of the written algorithm happens in 3 stages which are fetch, decode and execute. In this section we’ll take a brief look at these 3 stages and the operation of all these stages.</p><ul><li><strong>Fetch Instructions</strong><br>FETCH cycle consists of 2 stages with FETCH1 being set as the next state at the beginning.<br>FETCH1: Instruction Read <br>FETCH2: IR &lt;- M, PC &lt;- PC+1</li><li><strong>Decode Instructions</strong><br>After the instruction has been fetched, processor needs to identify which instruction has been fetched to invoke the correct execute cycle. During the decode cycle, processor identifies the execution cycle by the opcode of the instruction and passes down to the execute cycle to carry out the rest of the operation.</li><li><strong>Execute Instruction</strong><br>Execute instructions are the main types of instructions that carry out the major parts of the processing. The execute instructions can be classified according to the tasks they perform.</li></ul><p>You can get a clear understanding about the instructions and their functionalities in the <a href="https://github.com/ShechemKS/DownSampling_Processor/blob/master/Pocessor%20Design%20Report.pdf">project report</a>. </p><p>Finally, the state diagram of the complete process looked like this.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="../content/images/2021/12/Screenshot-2021-12-12-at-00.32.41.png" class="kg-image" alt loading="lazy" width="1766" height="610" srcset="../content/images/size/w600/2021/12/Screenshot-2021-12-12-at-00.32.41.png 600w, ../content/images/size/w1000/2021/12/Screenshot-2021-12-12-at-00.32.41.png 1000w, ../content/images/size/w1600/2021/12/Screenshot-2021-12-12-at-00.32.41.png 1600w, ../content/images/2021/12/Screenshot-2021-12-12-at-00.32.41.png 1766w" sizes="(min-width: 720px) 720px"><figcaption>State Diagram of the Processor</figcaption></figure><h2 id="algorithm">Algorithm</h2><p>The algorithm for the image down-sampling process consists of two main sections which are the filtering of the image and the down-sampling itself. First, the filtering algorithm is applied to the whole image by selecting 3x1 and 1x3 pixel sets and then the down-sampling algorithm is applied. More details about each of these algorithms will be explained below.</p><h3 id="filtering-algorithm">Filtering Algorithm</h3><p>Filtering is done by using a gaussian kernel. Instead of using a 3x3, 2-D gaussian kernel, we opt kernel separability where 2 kernels that are 1x3 and 3x1 run through the image as shown below.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="../content/images/2021/12/Screenshot-2021-12-12-at-00.35.41.png" class="kg-image" alt loading="lazy" width="1090" height="200" srcset="../content/images/size/w600/2021/12/Screenshot-2021-12-12-at-00.35.41.png 600w, ../content/images/size/w1000/2021/12/Screenshot-2021-12-12-at-00.35.41.png 1000w, ../content/images/2021/12/Screenshot-2021-12-12-at-00.35.41.png 1090w" sizes="(min-width: 720px) 720px"><figcaption>Filter Kernels</figcaption></figure><p>The main reason for the above selection was to make the algorithm more simple and easy to understand. At first vertical filtering was carried out and horizontal filtering was carried out on resultant image after the vertical filtering. Finally after the two filtrations, pixel values of the image were saved in the main memory. The weighted average was calculated by multiplying the pixel value and kernel value and adding the three likewise values together and dividing it by the weighted average of the kernel, which is 4 in both. The below illustration may give you a better understanding.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="../content/images/2021/12/Screenshot-2021-12-12-at-00.37.11.png" class="kg-image" alt loading="lazy" width="1242" height="482" srcset="../content/images/size/w600/2021/12/Screenshot-2021-12-12-at-00.37.11.png 600w, ../content/images/size/w1000/2021/12/Screenshot-2021-12-12-at-00.37.11.png 1000w, ../content/images/2021/12/Screenshot-2021-12-12-at-00.37.11.png 1242w" sizes="(min-width: 720px) 720px"><figcaption>Applying the filter</figcaption></figure><p>After applying the vertical kernel shown below to the three green pixels in the image, the centre pixel value (red one) will get updated.</p><h3 id="downsampling-algorithm">Downsampling Algorithm</h3><p>After the filtering algorithm is applied to the image, we then apply the down sampling algorithm to the filtered image. The concept of the down sampling algorithm is to select each alternative pixel value. It is also done in two steps by selecting an alternative pixel values horizontally and skipping an entire row vertically. The below illustration will give you a better idea about this process.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="../content/images/2021/12/Screenshot-2021-12-12-at-00.39.35.png" class="kg-image" alt loading="lazy" width="988" height="456" srcset="../content/images/size/w600/2021/12/Screenshot-2021-12-12-at-00.39.35.png 600w, ../content/images/2021/12/Screenshot-2021-12-12-at-00.39.35.png 988w" sizes="(min-width: 720px) 720px"><figcaption>Pixel Selection</figcaption></figure><p>Which will give us a resultant image as follows.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="../content/images/2021/12/Screenshot-2021-12-12-at-00.40.00.png" class="kg-image" alt loading="lazy" width="514" height="258"><figcaption>Resultant downsampled image</figcaption></figure><p>After coding the above algorithms in RTL using many modules created along the way such as registers, ALU (Arithmatic and Logic Units), Controller etc., RTL view of the processor can be shown as follows.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="../content/images/2021/12/Screenshot-2021-12-12-at-00.44.15.png" class="kg-image" alt loading="lazy" width="1690" height="1128" srcset="../content/images/size/w600/2021/12/Screenshot-2021-12-12-at-00.44.15.png 600w, ../content/images/size/w1000/2021/12/Screenshot-2021-12-12-at-00.44.15.png 1000w, ../content/images/size/w1600/2021/12/Screenshot-2021-12-12-at-00.44.15.png 1600w, ../content/images/2021/12/Screenshot-2021-12-12-at-00.44.15.png 1690w" sizes="(min-width: 720px) 720px"><figcaption>RTL view of the processor</figcaption></figure><h2 id="error-detection">Error Detection</h2><p>In order to check how good our algorithm, we need to compare it with a reference result. Hence, for this task we used an opencv down sampled image from python. With the resultant image we get from python, we compared our resultant image from the processor and calculated the error.</p><p>Here, we have shown two images along with their opencv down sampled version and our processor down sampled version and the error between two images. Note that second image consists of many textures.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="../content/images/2021/12/Screenshot-2021-12-12-at-00.46.41.png" class="kg-image" alt loading="lazy" width="1236" height="942" srcset="../content/images/size/w600/2021/12/Screenshot-2021-12-12-at-00.46.41.png 600w, ../content/images/size/w1000/2021/12/Screenshot-2021-12-12-at-00.46.41.png 1000w, ../content/images/2021/12/Screenshot-2021-12-12-at-00.46.41.png 1236w" sizes="(min-width: 720px) 720px"><figcaption>Result comparison (Low textured)</figcaption></figure><p>Error with the opencv down sampled image gives us 5% value. The main reason for this is the values saved on the memory of the FPGA was not ideal. Also the algorithm used by opencv is way more advanced than the one we used for out algorithm. Also numerical errors like floating points can affect this as well.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="../content/images/2021/12/Screenshot-2021-12-12-at-00.48.16.png" class="kg-image" alt loading="lazy" width="1204" height="1014" srcset="../content/images/size/w600/2021/12/Screenshot-2021-12-12-at-00.48.16.png 600w, ../content/images/size/w1000/2021/12/Screenshot-2021-12-12-at-00.48.16.png 1000w, ../content/images/2021/12/Screenshot-2021-12-12-at-00.48.16.png 1204w" sizes="(min-width: 720px) 720px"><figcaption>Result comparison (High textured)</figcaption></figure><p>So, as you can our processor is capable of downsample an image by keeping the error level in a very low value. The difference between our downsampled image using machine instruction and the OpenCV based downsampled image is negligible. </p><p>This project was a huge success and this can be considered as one of the most interesting projects done as an undergraduate. If you want to know more about the project you can visit this <a href="https://github.com/ShechemKS/DownSampling_Processor">link</a> and look at the implementation. </p><p><br><br><br> </p>
                <section class="m-tags in-post">
                  <h3 class="m-submenu-title">Tags</h3>
                  <ul>
                      <li>
                        <a href="../tag/projects/index.html" title="Projects">Projects</a>
                      </li>
                  </ul>
                </section>
            </div>
          </div>
        </div>
        <section class="m-author">
          <div class="m-author__content">
            <div class="m-author__picture">
              <a href="../author/sakuna/index.html" class="m-author-picture" aria-label="Sakuna Jayasundara">
                  <div style="background-image: url(../content/images/2021/12/IMG_20200411_014007_641.jpg);"></div>
              </a>
            </div>
            <div class="m-author__info">
              <h4 class="m-author__name">
                <a href="../author/sakuna/index.html">Sakuna Jayasundara</a>
              </h4>
                <p class="m-author__bio">Machine vision and deep learning enthusiast.</p>
              <ul class="m-author-links">
              </ul>
            </div>
          </div>
        </section>
        <div id="disqus_thread"></div>
        <script>
            /**
            *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
            *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
            /*
            */
            var disqus_config = function () {
            this.page.url = "https://sakunah.xyz";  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = "ghost-61b4ec71f714c603360260eb"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
            
            (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = 'https://the-seeker-1.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          <section class="m-recommended">
            <div class="l-wrapper in-recommended">
              <h3 class="m-section-title in-recommended">Recommended for you</h3>
              <div class="m-recommended-articles">
                <div class="m-recommended-slider glide js-recommended-slider">
                  <div class="glide__track" data-glide-el="track">
                    <div class="glide__slides">
                      
    <div class="m-recommended-slider__item glide__slide">
  <article class="m-article-card  post tag-projects tag-research featured">
    <div class="m-article-card__picture">
      <a href="../ble-based-indoor-positioning-system/index.html" class="m-article-card__picture-link" aria-hidden="true" tabindex="-1"></a>
        <img class="m-article-card__picture-background" src="../content/images/size/w600/2021/12/Bluetooth-Logo-pb87i7n3872aiq9im36yfrdezg42xgkqx9skbf64qw.png" loading="lazy" alt="">
      <a href="../author/sakuna/index.html" class="m-article-card__author js-tooltip" aria-label="Sakuna Jayasundara" data-tippy-content="Posted by Sakuna Jayasundara ">
          <div style="background-image: url(../content/images/size/w100/2021/12/IMG_20200411_014007_641.jpg);"></div>
      </a>
        <a href="../ble-based-indoor-positioning-system/index.html" class="m-article-card__featured js-tooltip" data-tippy-content="Featured" aria-label="Featured">
          <span class="icon-star" aria-hidden="true"></span>
        </a>
    </div>
      <div class="m-article-card__info">
        <a href="../tag/projects/index.html" class="m-article-card__tag">Projects</a>
      <a href="../ble-based-indoor-positioning-system/index.html" class="m-article-card__info-link" aria-label="BLE Based Indoor Positioning System">
        <div>
          <h2 class="m-article-card__title js-article-card-title " title="BLE Based Indoor Positioning System">
            BLE Based Indoor Positioning System
          </h2>
        </div>
        <div class="m-article-card__timestamp">
          <span>25 minutes ago</span>
          <span>&bull;</span>
          <span>3 min read</span>
        </div>
      </a>
    </div>
  </article>
    </div>
    <div class="m-recommended-slider__item glide__slide">
  <article class="m-article-card  post tag-projects featured">
    <div class="m-article-card__picture">
      <a href="../object-detection-tracking-and-suspicious-activity-recognition-formaritime-surveillance-using-thermal-vision/index.html" class="m-article-card__picture-link" aria-hidden="true" tabindex="-1"></a>
        <img class="m-article-card__picture-background" src="../content/images/size/w600/2021/12/PTI02_10_2021_000230B_1613623895951_1613623935527_1638100241965.jpg" loading="lazy" alt="">
      <a href="../author/sakuna/index.html" class="m-article-card__author js-tooltip" aria-label="Sakuna Jayasundara" data-tippy-content="Posted by Sakuna Jayasundara ">
          <div style="background-image: url(../content/images/size/w100/2021/12/IMG_20200411_014007_641.jpg);"></div>
      </a>
        <a href="../object-detection-tracking-and-suspicious-activity-recognition-formaritime-surveillance-using-thermal-vision/index.html" class="m-article-card__featured js-tooltip" data-tippy-content="Featured" aria-label="Featured">
          <span class="icon-star" aria-hidden="true"></span>
        </a>
    </div>
      <div class="m-article-card__info">
        <a href="../tag/projects/index.html" class="m-article-card__tag">Projects</a>
      <a href="../object-detection-tracking-and-suspicious-activity-recognition-formaritime-surveillance-using-thermal-vision/index.html" class="m-article-card__info-link" aria-label="Object Detection, Tracking and Suspicious Activity Recognition for
Maritime Surveillance using Thermal Vision">
        <div>
          <h2 class="m-article-card__title js-article-card-title " title="Object Detection, Tracking and Suspicious Activity Recognition for
Maritime Surveillance using Thermal Vision">
            Object Detection, Tracking and Suspicious Activity Recognition for
Maritime Surveillance using Thermal Vision
          </h2>
        </div>
        <div class="m-article-card__timestamp">
          <span>12 hours ago</span>
          <span>&bull;</span>
          <span>6 min read</span>
        </div>
      </a>
    </div>
  </article>
    </div>
                    </div>
                  </div>
                  <div data-glide-el="controls" class="glide__arrows js-controls">
                    <button data-glide-dir="<" class="m-icon-button filled in-recommended-articles glide-prev" aria-label="Previous">
                      <span class="icon-arrow-left" aria-hidden="true"></span>
                    </button>
                    <button data-glide-dir=">" class="m-icon-button filled in-recommended-articles glide-next" aria-label="Next">
                      <span class="icon-arrow-right" aria-hidden="true"></span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </section>
    </div>
  </article>
</main>



    
<div class="m-search js-search" role="dialog" aria-modal="true" aria-label="Search">
  <button class="m-icon-button outlined as-close-search js-close-search" aria-label="Close search">
    <span class="icon-close" aria-hidden="true"></span>
  </button>
  <div class="m-search__content">
    <form class="m-search__form">
      <div class="pos-relative">
        <span class="icon-search m-search-icon" aria-hidden="true"></span>
        <label for="search-input" class="sr-only">
          Type to search
        </label>
        <input id="search-input" type="text" class="m-input in-search js-input-search" placeholder="Type to search">
      </div>
    </form>
    <div class="js-search-results hide"></div>
    <p class="m-not-found align-center hide js-no-results">
      No results for your search, please try with something else.
    </p>
  </div>
</div>

    
<footer class="m-footer">
  <div class="m-footer__content">
    <nav class="m-footer-social">
        <a href="https://twitter.com/ghost" target="_blank" rel="noopener" aria-label="Twitter">
          <span class="icon-twitter" aria-hidden="true"></span>
        </a>
      <a href="https://github.com/sakunaharinda" aria-label="Github">
        <span class="icon-github" aria-hidden="true"></span>
      </a>
      <a href="https://scholar.google.com/citations?user=_2tM_-UAAAAJ&hl=en" aria-label="Google Scholar">
        <span class="icon-globe" aria-hidden="true"></span>
      </a>
      <a href="https://www.linkedin.com/in/sakuna-harinda/" aria-label="LinkedIn">
        <span class="icon-linkedin" aria-hidden="true"></span>
      </a>
      <a href="http://localhost:2368/rss" aria-label="RSS">
        <span class="icon-rss" aria-hidden="true"></span>
      </a>
    </nav>
    <p class="m-footer-copyright">
      <span>The Seeker &copy; 2021</span>
      <span>&nbsp; &bull; &nbsp;</span>
      <span>Published with <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a></span>
    </p>
    <p class="m-footer-copyright jslicense">
      <a href="../assets/html/javascript.html%3Fv=7298761255.html" rel="jslicense">JavaScript license information</a>
    </p>
  </div>
</footer>

    <div class="m-alert success subscribe js-alert" data-notification="subscribe">
  Great! You&#x27;ve successfully subscribed.
  <button class="m-alert__close js-notification-close" aria-label="Close">
    <span class="icon-close"></span>
  </button>
</div>

<div class="m-alert success signup js-alert" data-notification="signup">
  Great! Next, complete checkout for full access.
  <button class="m-alert__close js-notification-close" aria-label="Close">
    <span class="icon-close"></span>
  </button>
</div>

<div class="m-alert success signin js-alert" data-notification="signin">
  Welcome back! You&#x27;ve successfully signed in.
  <button class="m-alert__close js-notification-close" aria-label="Close">
    <span class="icon-close"></span>
  </button>
</div>

<div class="m-alert success checkout js-alert" data-notification="checkout">
  Success! Your account is fully activated, you now have access to all content.
  <button class="m-alert__close js-notification-close" aria-label="Close">
    <span class="icon-close"></span>
  </button>
</div>
    <script crossorigin="anonymous" src="https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver%2CPromise%2CArray.prototype.includes%2CString.prototype.endsWith%2CString.prototype.startsWith%2CObject.assign%2CNodeList.prototype.forEach"></script>
    <script defer src="../assets/js/manifest.js%3Fv=7298761255"></script>
    <script defer src="../assets/js/vendor/content-api.min.js%3Fv=7298761255"></script>
    <script defer src="../assets/js/vendor.js%3Fv=7298761255"></script>
    <script defer src="../assets/js/app.js%3Fv=7298761255"></script>

      <script defer src="../assets/js/post.js%3Fv=7298761255"></script>


    
  </body>
</html>
